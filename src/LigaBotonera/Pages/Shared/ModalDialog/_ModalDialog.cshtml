@model ModalDialogViewModel;

<div id="modal-dialog">
</div>
@if (Model is not null)
{
    <div x-data="{}">
        <dialog x-ref="modalDialog"
                x-init="$refs.modalDialog.showModal()"
                class="bg-white dark:bg-emerald-800 rounded-xl shadow-xl outline-none w-full max-w-md mx-4 backdrop:bg-black/50 backdrop:backdrop-blur-sm fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
            <div class="flex items-center gap-3 px-6 py-4 border-b border-slate-300 dark:border-emerald-700">
                <div id="modal-diaog-icon"
                     class="w-10 h-10 flex items-center justify-center dark:bg-emerald-800"
                     aria-hidden="true">
                    @Html.Raw(RenderIcon())
                </div>
                <h2 id="modal-dialog-title"
                    class="text-lg font-bold text-slate-800 dark:text-white">
                    @Model.Title
                </h2>
            </div>
            <div id="modal-dialog-content"
                 class="px-6 py-4 text-slate-700 dark:text-white whitespace-pre-line">
                @RenderMessages()
            </div>
            <div id="modal-dialog-footer"
                 class="px-6 py-4 flex justify-end gap-3 border-t border-slate-300 dark:border-emerald-700">
                @Html.Raw(RenderButtons())
            </div>
        </dialog>
    </div>
}

@functions {
    string RenderMessages()
    {
        return string.Join("\n", Model.Messages);
    }

    string RenderIcon() => Model.Type switch
    {
        ModalDialogType.Warning => $"""
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http:www.w3.org/2000/svg">
                <path d="M12 2L1 21H23L12 2Z" fill="#FFD700" stroke="#000000" stroke-width="1" stroke-linejoin="round"/>
                <rect x="11" y="9" width="2" height="6" fill="black"/>
                <rect x="11" y="17" width="2" height="2" fill="black"/>
            </svg>
            """,
        ModalDialogType.Success => $"""
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="#28A745"/>
                <path d="M8 12.5L11 15.5L16 9.5" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            """,
        ModalDialogType.Error => $"""
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="#FF0000"/>
                <path d="M15 9L9 15M9 9L15 15" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            """,
        ModalDialogType.Question => $"""
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="#007BFF"/>
                <path d="M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.29152 14.92 10C14.92 12 11.92 13 11.92 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="17" r="1" fill="white"/>
            </svg>
            """,
        _ => $"""
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="#007BFF"/>
                <circle cx="12" cy="7" r="1.2" fill="white"/>
                <rect x="10.8" y="10" width="2.4" height="7" rx="1" fill="white"/>
            </svg>
            """
    };

    string RenderButtons() => Model.Type switch
    {
        ModalDialogType.Warning => $"""
            <button type="button"
                    id="messageModalCloseButton"
                    class="px-6 py-2 rounded-lg bg-yellow-500 text-white hover:bg-yellow-600"
                    x-on:click="$refs.modalDialog.close()">
                Ok
            </button>
            """,
        ModalDialogType.Success => $"""
            <button type="button"
                    id="messageModalCloseButton"
                    class="px-6 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700"
                    x-on:click="$refs.modalDialog.close()">
                Ok
            </button>
            """,
        ModalDialogType.Error => $"""
            <button type="button"
                    class="px-6 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700"
                    x-on:click="$refs.modalDialog.close()">
                Ok
            </button>
            """,
        ModalDialogType.Question => $"""
            <button type="button"
                    id="messageModalCloseButton"
                    class="px-6 py-2 rounded-lg border border-slate-300 dark:border-emerald-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-emerald-700"
                    x-on:click="$refs.modalDialog.close()">
                Cancelar
            </button>
            <button id="modalDialogConfirm"
                    type="button"
                    class="px-6 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">
                Confirmar
            </button>
            """,
        _ => $"""
            <button type="button"
                    id="messageModalCloseButton"
                    class="px-6 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700"
                    data-autofocus
                    x-on:click="$refs.modalDialog.close()">
                Ok
            </button>
            """
    };
}
